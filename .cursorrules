# CLİXER - Enterprise Analytics Platform
# "Olağanüstü Veri Hızı" - Power BI / Tableau / Qlik Rakibi
# Versiyon: v4.31 | Tarih: 15 Ocak 2026

---

## DOKÜMANTASYON YAPISI (15 Ocak 2026)

Bu dosya optimize edilmiştir. Detaylı bilgiler aşağıdaki dosyalarda:

| Dosya | İçerik | Ne Zaman Oku |
|-------|--------|--------------|
| `docs/architecture.md` | Mimari, servisler, veritabanı, akışlar | Yeni özellik eklerken |
| `docs/troubleshooting.md` | Hata çözümleri, debugging | Hata ayıklarken |
| `docs/history/versions.md` | Tüm versiyon geçmişi (v2.0 - v4.31) | Geçmiş araştırırken |
| `docs/cursorrules_backup_20260115.md` | Orijinal 9878 satırlık yedek | Acil durumda |

---

## CURSOR AI - KRİTİK KURALLAR

### 1. Test Edilmeden Rules'a Yazma
Kullanıcıdan "başarılı/çalıştı" mesajı gelmeden .cursorrules'a güncelleme YAPMA!

### 2. Git Push Zorunlu
Commit sonrası MUTLAKA `git push origin master` yap. Push edilmemiş kod = Production'da YOK.

---

## DOKUNMA! KORUNAN DOSYALAR

> **KULLANICI AÇIKÇA İSTEMEDİKÇE BU DOSYALARA ASLA DOKUNMA!**

| Dosya | Neden Korunuyor |
|-------|-----------------|
| `frontend/src/components/FilterBar.tsx` | Bölge/Grup/Mağaza seçici - v4.26'da stabilize edildi |
| `frontend/src/stores/filterStore.ts` | Filtre state yönetimi - kritik bağımlılıklar var |
| `frontend/src/pages/DashboardPage.tsx` | Filtre entegrasyonu |
| `frontend/src/pages/AnalysisPage.tsx` | Filtre entegrasyonu |
| `services/analytics-service/src/index.ts` | storeIds/regionIds/groupIds işleme |

**Stabil Versiyon:** v4.26-stable-magaza (12 Ocak 2026)

---

## PROJE ÖZETİ

**Clixer**, kurumsal analitik platformudur. Perakende, F&B, üniversite, holding sektörlerinde kullanılır.

**Fark:** Real-time WebSocket, Offline PWA, Delta Sync, White-label, No-code ETL

---

## MİMARİ

### Servisler ve Portlar

| Servis | Port | Sorumluluk |
|--------|------|------------|
| gateway | 4000 | API routing, proxy |
| auth-service | 4001 | Login, JWT, 2FA |
| core-service | 4002 | Users, Tenants, Designs, Settings |
| data-service | 4003 | Connections, Datasets, ETL, ClickHouse |
| notification-service | 4004 | Alerts, Email, WebSocket |
| analytics-service | 4005 | KPI okuma, Cache, Aggregation |
| etl-worker | - | Background ETL jobs |

### Veritabanları

| DB | Kullanım |
|----|----------|
| PostgreSQL | Config, users, settings (OLTP) |
| ClickHouse | Analitik veriler (OLAP) |
| Redis | Cache, Pub/Sub, Queue |

### Temel Akış
```
Müşteri DB → ETL → ClickHouse → Redis Cache → Dashboard
```

---

## MÜŞTERİ DEPLOY KOMUTU

```bash
cd /opt/clixer && sudo git fetch origin && sudo git reset --hard origin/master && sudo bash scripts/stop-all.sh && cd frontend && sudo rm -rf dist && sudo npm run build && sudo chown -R www-data:www-data dist && sudo systemctl restart nginx && cd /opt/clixer && sudo bash scripts/start-all.sh && echo "Deploy tamamlandı!"
```

---

## PRODUCTION NOTLARI

### Systemd Servisleri
Linux'ta servisler systemd ile yönetilir:
```bash
sudo /opt/clixer/scripts/setup-services.sh  # Kurulum
sudo systemctl status clixer-*              # Durum
sudo /opt/clixer/scripts/restart-all.sh     # Restart
```

### NPM Yolu Standardizasyonu
Farklı Node.js kurulumları için `setup-services.sh` otomatik symlink oluşturur:
```bash
ln -sf $(which npm) /usr/bin/npm
```

### Restart Sistemi
UI'dan "Sistemi Yeniden Başlat" butonu (Admin Panel > Sistem Monitörü):
- Windows: `scripts/restart-local.ps1`
- Linux: `scripts/restart-all.sh`

Sudoers gerekli: `clixer ALL=(ALL) NOPASSWD: /opt/clixer/scripts/restart-all.sh`

---

## STABİL MÜŞTERİLER

| Müşteri | Versiyon | Tarih | Durum |
|---------|----------|-------|-------|
| Tavuk Dünyası (TD) | v4.31 | 15 Ocak 2026 | STABİL |
| Nisantasi FIX | v4.31 | 15 Ocak 2026 | STABİL |
| Nişantaşı 03 | v4.31 | 15 Ocak 2026 | STABİL |

---

## TEKNOLOJİ

- **Frontend:** React 19, TypeScript, Vite, Zustand, TailwindCSS
- **Backend:** Node.js, Express, TypeScript
- **Mobile:** Capacitor (PWA + Native)
- **Infra:** Docker, systemd, Nginx

---

## DETAYLI BİLGİ İÇİN

| İhtiyaç | Dosya | Kullanım |
|---------|-------|----------|
| Mimari bilgi | `@docs/architecture.md` | Yeni özellik, servis yapısı, veritabanı |
| Hata çözümü | `@docs/troubleshooting.md` | Debug, error, sorun giderme |
| Geçmiş bilgi | `@docs/history/versions.md` | Versiyon notları, eski değişiklikler |
| Tam yedek | `docs/cursorrules_backup_20260115.md` | Acil durumda tüm eski bilgiler |

**Cursor AI:** Bu dosyaları gerektiğinde oku veya kullanıcı `@dosya` ile referans versin.

---
